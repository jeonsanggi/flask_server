<!doctype html>
<head>
<meta name="viewport" content="width=320; user-scalable=no" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Camera</title>

<script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<div class="container">
    <form method="post" action="" enctype="multipart/form-data" id="myform">
      <div class='preview'>
         <img src="" id="img" width="100" height="100">
     </div>
     <div >
         <input type="file" id="file" name="file" />
         <input type="button" class="button" value="Upload" id="but_upload">
     </div>
    </form>
</div>
<script>
$(document).ready(function(){

    $("#but_upload").click(function(){

        var fd = new FormData();
        var files = $('#file')[0].files[0];
        fd.append('file',files);

        $.ajax({
            url: '/cm/image',
            type: 'POST',
            data: fd,
            contentType: false,
            processData: false,
            success: function(response){
                if(response != 0){
                    $("#img").attr("src",response);
                    $(".preview img").show(); // Display image element
                }else{
                    alert('file not uploaded');
                }
            },
        });
    });
});
</script>
